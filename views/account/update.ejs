<% if (title) { %>
  <h1><%= title %></h1>
<% } %>

<%- messages() %>

<% if (errors) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<div class="form-container">
  <!-- Account Update Form -->
  <form id="updateAccountForm" action="/account/update" method="post">
    <fieldset>
      <legend>Account Update</legend>
      
      <label for="account_firstname">First Name:</label>
      <input type="text" 
             id="account_firstname" 
             name="account_firstname" 
             required 
             value="<%= locals.account_firstname %>"
             pattern="[A-Za-z]+"
             title="Please enter a valid first name (letters only)">

      <label for="account_lastname">Last Name:</label>
      <input type="text" 
             id="account_lastname" 
             name="account_lastname" 
             required 
             value="<%= locals.account_lastname %>"
             pattern="[A-Za-z]+"
             title="Please enter a valid last name (letters only)">

      <label for="account_email">Email:</label>
      <input type="email" 
             id="account_email" 
             name="account_email" 
             required 
             value="<%= locals.account_email %>"
             pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
             title="Please enter a valid email address">

      <input type="hidden" name="account_id" value="<%= locals.account_id %>">
      
      <button type="submit">Update Account</button>
    </fieldset>
  </form>

  <!-- Password Update Form -->
  <form id="updatePasswordForm" action="/account/update-password" method="post">
    <fieldset>
      <legend>Change Password</legend>
      
      <p class="password-requirements">Password must be at least 12 characters and contain at least 1 number, 1 capital letter and 1 special character</p>
      
      <label for="account_password">New Password:</label>
      <div class="password-input">
        <input type="password" 
               id="account_password" 
               name="account_password" 
               required 
               pattern="^(?=.*\d)(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?=.*[a-z]).{12,}$"
               title="Password must be at least 12 characters and contain at least 1 number, 1 capital letter and 1 special character">
        <span id="showPassword" class="password-toggle">Show</span>
      </div>

      <input type="hidden" name="account_id" value="<%= locals.account_id %>">
      
      <button type="submit">Change Password</button>
    </fieldset>
  </form>
</div>

<!-- Add password toggle functionality -->
<script src="/js/script.js"></script> 